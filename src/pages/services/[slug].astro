---
import Layout from "../../layouts/Layout.astro";
import contentfulClient from "#lib/contentfulClient.ts";
import { documentToHtmlString } from "@contentful/rich-text-html-renderer";
import formatDate from "#lib/dateMethods";
import { Image } from "astro:assets";
import imageOptimizer from "#lib/imageOptimizer";
import SectionHeader from "#components/Shared/SectionHeader.astro";

export async function getStaticPaths() {
  const entries = await contentfulClient.getEntries({
    content_type: "insight",
  });

  let options = {
    renderNode: {
      "embedded-asset-block": (node: any) =>
        `<img  src="${node.data.target.fields.file.url}"/>`,
    },
  };

  const pages = entries.items.map((item) => ({
    params: { slug: item.fields.slug },
    props: {
      title: item.fields.title,
      content: documentToHtmlString(item.fields.content as any, options),
      brief: item.fields.brief,
      dateCreated: formatDate(item.sys.createdAt as string),
      author: item.fields.author,
      image: (item.fields.headlineImage as any).fields.file.url,
      imageAlt: (item.fields.headlineImage as any).fields.title,
      slug: item.fields.slug,
    },
  }));
  return pages;
}

const { title, content, brief, dateCreated, author, image, imageAlt, slug } =
  Astro.props as any;
---

<SectionHeader
  title="Commercial Law"
  description="At Kinyanjui Njeru & Co Advocates, our people are at the heart of everything we do. We believe that when our lawyers are fulfilled in their work, they deliver the best results for our clients. That’s why we built Kinyanjui Njeru & Co Advocates—to empower ambitious legal professionals with a platform that supports their career growth while ensuring clients receive top-tier legal services. In an industry driven by relationships, having a team that shares our expertise and values makes all the difference."
  subtitle="Strategic Commercial Legal Support for Businesses of All Sizes"
>
  <Accordion items={items} mainHeading={mainHeading} />
</SectionHeader>
